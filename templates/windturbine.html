<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Learning Prediction</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-custom">
        <a class="navbar-brand" href="#">Machine Learning Prediction</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/solarflare">Solar Flare</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/heart">Heart Disease</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/weather">Weather</a>
                </li>
                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Energy (Regression / Classification)
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="/energy">Energy Production</a>
                        <a class="dropdown-item" href="/wind-turbine">Wind Turbine (Fault Detection / Diagnostic)</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <h1>Wind Turbine (Fault Detection / Diagnostic)</h1>
        <br>
        <h3><strong>Data presentation</strong></h3>

        Data from Kaggle : <a href="https://www.kaggle.com/datasets/wasuratme96/iiot-data-of-wind-turbine/data" target="_blank">wind-turbine-faults</a>
        <br>There is 3 datasets :
        <br><br>
        <strong>1. fault_data.csv :</strong>
        <div class="row">
            <div class="col-6">
                Contains wind turbine fault types (5 types)
                <table>
                    <tr>
                        <th>Fault Class</th>
                        <th>Fault Description</th>
                    </tr>
                    <tr>
                        <td>GF</td>
                        <td>Generator heating Fault</td>
                    </tr>
                    <tr>
                        <td>MF</td>
                        <td>Mains failure Fault</td>
                    </tr>
                    <tr>
                        <td>FF</td>
                        <td>Feeding Fault</td>
                    </tr>
                    <tr>
                        <td>AF</td>
                        <td>Air cooling Fault</td>
                    </tr>
                    <tr>
                        <td>EF</td>
                        <td>Excitation Fault</td>
                    </tr>
                </table>
                553 rows × 3 columns
                <br>From 14 May 2014 to 15 January 2015
            </div>
            <div class="col-6">
                CSV Description
                <table>
                    <tr>
                        <th>Column</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td>DateTime</td>
                        <td>The date and time when the fault was recorded.</td>
                    </tr>
                    <tr>
                        <td>Time</td>
                        <td>Unix timestamp representing the recorded date and time.</td>
                    </tr>
                    <tr>
                        <td>Fault</td>
                        <td>The type of fault or error that occurred.</td>
                    </tr>
                </table>
            </div>
        </div>
        <br>
        <br><strong>2. scada_data.csv :</strong>
        <div class="row">
            <div class="col-6">
                Contains 67 informations (or status) of wind turbine components recorded by SCADA system
                <br><br>49027 rows × 66 columns
                <br>From 01 May 2014 to 09 April 2015
                <br><br>SCADA stands for Supervisory Control and Data Acquisition. It is a system used for controlling and monitoring industrial processes.
                <br><br><button id="toggleScadaDescBtn" class="btn btn-primary toggle-btn">Show / Hide Description</button>
            </div>
            <div class="col-6" id="scadaDesc" style="display: none;">
                CSV Description
                <table>
                    <tr>
                        <th>Column</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td>DateTime</td>
                        <td>The date and time of the recorded data.</td>
                    </tr>
                    <tr>
                        <td>Time</td>
                        <td>Unix timestamp representing the recorded date and time.</td>
                    </tr>
                    <tr>
                        <td>Error</td>
                        <td>Error code or status indicating if there were any issues during the recording period.</td>
                    </tr>
                    <tr>
                        <td>WEC: ava. windspeed</td>
                        <td>Average wind speed recorded by the Wind Energy Converter (WEC).</td>
                    </tr>
                    <tr>
                        <td>WEC: max. windspeed</td>
                        <td>Maximum wind speed recorded by the WEC.</td>
                    </tr>
                    <tr>
                        <td>WEC: min. windspeed</td>
                        <td>Minimum wind speed recorded by the WEC.</td>
                    </tr>
                    <tr>
                        <td>WEC: ava. Rotation</td>
                        <td>Average rotation speed of the WEC.</td>
                    </tr>
                    <tr>
                        <td>WEC: max. Rotation</td>
                        <td>Maximum rotation speed of the WEC.</td>
                    </tr>
                    <tr>
                        <td>WEC: min. Rotation</td>
                        <td>Minimum rotation speed of the WEC.</td>
                    </tr>
                    <tr>
                        <td>WEC: ava. Power</td>
                        <td>Average power output of the WEC.</td>
                    </tr>
                    <tr>
                        <td>WEC: max. Power</td>
                        <td>Maximum power output of the WEC.</td>
                    </tr>
                    <tr>
                        <td>WEC: min. Power</td>
                        <td>Minimum power output of the WEC.</td>
                    </tr>
                    <tr>
                        <td>WEC: ava. Nacel position including cable twisting</td>
                        <td>Average nacelle position including any cable twisting.</td>
                    </tr>
                    <tr>
                        <td>WEC: Operating Hours</td>
                        <td>Total operating hours of the WEC.</td>
                    </tr>
                    <tr>
                        <td>WEC: Production kWh</td>
                        <td>Total production in kilowatt-hours.</td>
                    </tr>
                    <tr>
                        <td>WEC: Production minutes</td>
                        <td>Total production time in minutes.</td>
                    </tr>
                    <tr>
                        <td>WEC: ava. reactive Power</td>
                        <td>Average reactive power of the WEC.</td>
                    </tr>
                    <tr>
                        <td>WEC: max. reactive Power</td>
                        <td>Maximum reactive power of the WEC.</td>
                    </tr>
                    <tr>
                        <td>WEC: min. reactive Power</td>
                        <td>Minimum reactive power of the WEC.</td>
                    </tr>
                    <tr>
                        <td>WEC: ava. available P from wind</td>
                        <td>Average available power from wind.</td>
                    </tr>
                    <tr>
                        <td>WEC: ava. available P technical reasons</td>
                        <td>Average available power limited by technical reasons.</td>
                    </tr>
                    <tr>
                        <td>WEC: ava. Available P force majeure reasons</td>
                        <td>Average available power limited by force majeure reasons.</td>
                    </tr>
                    <tr>
                        <td>WEC: ava. Available P force external reasons</td>
                        <td>Average available power limited by external reasons.</td>
                    </tr>
                    <tr>
                        <td>WEC: ava. blade angle A</td>
                        <td>Average blade angle of blade A.</td>
                    </tr>
                    <tr>
                        <td>Sys 1 inverter 1 cabinet temp.</td>
                        <td>Temperature inside the cabinet of system 1 inverter 1.</td>
                    </tr>
                    <tr>
                        <td>Sys 1 inverter 2 cabinet temp.</td>
                        <td>Temperature inside the cabinet of system 1 inverter 2.</td>
                    </tr>
                    <tr>
                        <td>Sys 1 inverter 3 cabinet temp.</td>
                        <td>Temperature inside the cabinet of system 1 inverter 3.</td>
                    </tr>
                    <tr>
                        <td>Sys 1 inverter 4 cabinet temp.</td>
                        <td>Temperature inside the cabinet of system 1 inverter 4.</td>
                    </tr>
                    <tr>
                        <td>Sys 1 inverter 5 cabinet temp.</td>
                        <td>Temperature inside the cabinet of system 1 inverter 5.</td>
                    </tr>
                    <tr>
                        <td>Sys 1 inverter 6 cabinet temp.</td>
                        <td>Temperature inside the cabinet of system 1 inverter 6.</td>
                    </tr>
                    <tr>
                        <td>Sys 1 inverter 7 cabinet temp.</td>
                        <td>Temperature inside the cabinet of system 1 inverter 7.</td>
                    </tr>
                    <tr>
                        <td>Sys 2 inverter 1 cabinet temp.</td>
                        <td>Temperature inside the cabinet of system 2 inverter 1.</td>
                    </tr>
                    <tr>
                        <td>Sys 2 inverter 2 cabinet temp.</td>
                        <td>Temperature inside the cabinet of system 2 inverter 2.</td>
                    </tr>
                    <tr>
                        <td>Sys 2 inverter 3 cabinet temp.</td>
                        <td>Temperature inside the cabinet of system 2 inverter 3.</td>
                    </tr>
                    <tr>
                        <td>Sys 2 inverter 4 cabinet temp.</td>
                        <td>Temperature inside the cabinet of system 2 inverter 4.</td>
                    </tr>
                    <tr>
                        <td>Sys 2 inverter 5 cabinet temp.</td>
                        <td>Temperature inside the cabinet of system 2 inverter 5.</td>
                    </tr>
                    <tr>
                        <td>Sys 2 inverter 6 cabinet temp.</td>
                        <td>Temperature inside the cabinet of system 2 inverter 6.</td>
                    </tr>
                    <tr>
                        <td>Sys 2 inverter 7 cabinet temp.</td>
                        <td>Temperature inside the cabinet of system 2 inverter 7.</td>
                    </tr>
                    <tr>
                        <td>Spinner temp.</td>
                        <td>Temperature of the spinner.</td>
                    </tr>
                    <tr>
                        <td>Front bearing temp.</td>
                        <td>Temperature of the front bearing.</td>
                    </tr>
                    <tr>
                        <td>Rear bearing temp.</td>
                        <td>Temperature of the rear bearing.</td>
                    </tr>
                    <tr>
                        <td>Pitch cabinet blade A temp.</td>
                        <td>Temperature inside the pitch cabinet for blade A.</td>
                    </tr>
                    <tr>
                        <td>Pitch cabinet blade B temp.</td>
                        <td>Temperature inside the pitch cabinet for blade B.</td>
                    </tr>
                    <tr>
                        <td>Pitch cabinet blade C temp.</td>
                        <td>Temperature inside the pitch cabinet for blade C.</td>
                    </tr>
                    <tr>
                        <td>Blade A temp.</td>
                        <td>Temperature of blade A.</td>
                    </tr>
                    <tr>
                        <td>Blade B temp.</td>
                        <td>Temperature of blade B.</td>
                    </tr>
                    <tr>
                        <td>Blade C temp.</td>
                        <td>Temperature of blade C.</td>
                    </tr>
                    <tr>
                        <td>Rotor temp. 1</td>
                        <td>Temperature of rotor 1.</td>
                    </tr>
                    <tr>
                        <td>Rotor temp. 2</td>
                        <td>Temperature of rotor 2.</td>
                    </tr>
                    <tr>
                        <td>Stator temp. 1</td>
                        <td>Temperature of stator 1.</td>
                    </tr>
                    <tr>
                        <td>Stator temp. 2</td>
                        <td>Temperature of stator 2.</td>
                    </tr>
                    <tr>
                        <td>Nacelle ambient temp. 1</td>
                        <td>Ambient temperature inside the nacelle at position 1.</td>
                    </tr>
                    <tr>
                        <td>Nacelle ambient temp. 2</td>
                        <td>Ambient temperature inside the nacelle at position 2.</td>
                    </tr>
                    <tr>
                        <td>Nacelle temp.</td>
                        <td>General temperature inside the nacelle.</td>
                    </tr>
                    <tr>
                        <td>Nacelle cabinet temp.</td>
                        <td>Temperature inside the nacelle cabinet.</td>
                    </tr>
                    <tr>
                        <td>Main carrier temp.</td>
                        <td>Temperature of the main carrier.</td>
                    </tr>
                    <tr>
                        <td>Rectifier cabinet temp.</td>
                        <td>Temperature inside the rectifier cabinet.</td>
                    </tr>
                    <tr>
                        <td>Yaw inverter cabinet temp.</td>
                        <td>Temperature inside the yaw inverter cabinet.</td>
                    </tr>
                    <tr>
                        <td>Fan inverter cabinet temp.</td>
                        <td>Temperature inside the fan inverter cabinet.</td>
                    </tr>
                    <tr>
                        <td>Ambient temp.</td>
                        <td>Ambient temperature.</td>
                    </tr>
                    <tr>
                        <td>Tower temp.</td>
                        <td>Temperature inside the tower.</td>
                    </tr>
                    <tr>
                        <td>Control cabinet temp.</td>
                        <td>Temperature inside the control cabinet.</td>
                    </tr>
                    <tr>
                        <td>Transformer temp.</td>
                        <td>Temperature of the transformer.</td>
                    </tr>
                    <tr>
                        <td>RTU: ava. Setpoint 1</td>
                        <td>Average setpoint of the Remote Terminal Unit (RTU).</td>
                    </tr>
                    <tr>
                        <td>Inverter averages</td>
                        <td>Average data from inverters.</td>
                    </tr>
                    <tr>
                        <td>Inverter std dev</td>
                        <td>Standard deviation of inverter data.</td>
                    </tr>
                </table>
            </div>
        </div>
        <br>
        <br><strong>3. status_data.csv :</strong>
        <div class="row">
            <div class="col-6">
                Contains description of status of wind turbine operational
                <br><br>1849 rows × 9 columns
                <br>From 24 April 2014 to 28 April 2015
                <br><br><button id="toggleStatusDescBtn" class="btn btn-primary toggle-btn">Show / Hide Description</button>
            </div>
            <div class="col-6" id="statusDesc" style="display: none;">
                CSV Description
                <table>
                    <tr>
                        <th>Column</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td>Time</td>
                        <td>The timestamp when the event or data was recorded.</td>
                    </tr>
                    <tr>
                        <td>Main Status</td>
                        <td>The primary status code indicating the general state of the turbine.</td>
                    </tr>
                    <tr>
                        <td>Sub Status</td>
                        <td>The secondary status code providing more specific information about the state of the turbine.</td>
                    </tr>
                    <tr>
                        <td>Full Status</td>
                        <td>A combined code of main and sub-status, often formatted as "Main Status : Sub Status".</td>
                    </tr>
                    <tr>
                        <td>Status Text</td>
                        <td>A textual description of the current status or state of the turbine.</td>
                    </tr>
                    <tr>
                        <td>T</td>
                        <td>Unknown. The meaning of this column is not provided. It could be a specific code or identifier.</td>
                    </tr>
                    <tr>
                        <td>Service</td>
                        <td>Indicates whether the turbine is under service or maintenance.</td>
                    </tr>
                    <tr>
                        <td>FaultMsg</td>
                        <td>Indicates if there is an error message associated with the current status.</td>
                    </tr>
                    <tr>
                        <td>Value0</td>
                        <td>A numerical value associated with the event or status, possibly a measurement or specific data point.</td>
                    </tr>
                </table>
            </div>
        </div>
        <br><br>

        <h3><strong>Objective : Predict wind turbine faults</strong></h3>
        <br>Classification : Predicting categorical variables (wind turbine faults)
        <br>Supervised learning : For each example, the value is known
        <br><br>
        <br><h3><strong>Analysis</strong></h3>
        The 3 datasets have different time spans. The status data has the longest record timespan from January 2014 to December 2015.<br>Therefore, when seeing the SCADA records, we can refer to status and fault data to see what happens on the turbine at certain timestamps.
        <br><img src="/static/images/energy/windTurbineFaults/wind_turbine_plot_time_span.png" alt="wind_turbine_plot_time_span.png">
        <br><br>There are lots of EF events in October and November 2014, and lots of FF events from October 2014 - January 2015.
        <img src="/static/images/energy/windTurbineFaults/wind_turbine_plot_nb_fault_per_month.png" alt="wind_turbine_plot_nb_fault_per_month.png">
        <br><br>
        <br><h3><strong>Combine SCADA and Fault Data</strong></h3>
        <br>We combine SCADA and fault data to pair each measurements with associated faults.
        <br><span style="color: lightcoral;">df_combine = scada_df.merge(fault_df, on='Time', how='outer')</span>
        <br><br>There are lots of NaNs, or unmatched SCADA timestamps with fault timestamps, because there are no faults happen at certain time like we saw in the first graph. For these NaNs, we will replace with "NF" (No Fault).
        <br><span style="color: lightcoral;">df_combine['Fault'] = df_combine['Fault'].replace(np.nan, 'NF')</span>
        <br><br><button id="togglecombinedScadaFaultBtn" class="btn btn-primary toggle-btn">Show / Hide Combined Dataframe</button>
        <div id="combinedScadaFaultTable" style="display: none;">
            <h4>Combined SCADA and Fault Datasets (first 5 rows)</h4>
            Scroll to the right to see all columns !
            {{ html_table | safe }}
        </div>
        <br><br><br><h3><strong>Data preparation for ML</strong></h3>
        <br><span style="color: lightcoral;">df_combine.Fault.value_counts()</span>
        <br><img src="/static/images/energy/windTurbineFaults/df_combine_nb_type_fault.png" alt="df_combine_nb_type_fault.png">
        <br><br>To have a balanced dataset, we will pick 300 samples of each fault mode data
        <br><br>Pick 300 samples of NF (No Fault) mode data
        <br><span style="color: lightcoral;">df_nf = df_combine[df_combine.Fault=='NF'].sample(300, random_state=42)</span>
        <br><br>Pick 300 samples of fault mode data
        <br><span style="color: lightcoral;">df_f = df_combine[df_combine.Fault!='NF']</span>
        <br><br>Combine no fault and faulty dataframes
        <br><span style="color: lightcoral;">df_combine = pd.concat((df_nf, df_f), axis=0).reset_index(drop=True)</span>
        <br><br>Drop irrelevant features
        <br><span style="color: lightcoral;">df_combine have now 853 rows × 54 columns</span>
        <br><img src="/static/images/energy/windTurbineFaults/imbalanced_fault_modes_pie.png" alt="imbalanced_fault_modes_pie.png">
        <br><br><br><h3><strong>Machine Learning - Fault modes Classification</strong></h3>
        <br><h4>2 Models</h4>
        <ul>
            <li>1. Model Fault Detection : detect if there is a fault or not</li>
            <li>2. Model Fault Diagnostic : detect which fault mode is happening</li>
        </ul>
        <br>
        <h4>1. Model Fault Detection</h4>
        <p>Classification algorithms tend to be biased towards majority classes, as they seek to minimize overall error.</p>
        <p>We use:</p>
        <ul>
            <li>SMOTE (Synthetic Minority Oversampling Technique) to oversample the minority classes (MF, GF, AF, EF).</li>
            <li>LightGBM.</li>
        </ul>
        <p>To avoid overfitting:</p>
        <ul>
            <li>We employed Stratified K-Fold cross-validation with 5 folds.</li>
        </ul>
        <p>Multiple scoring metrics are used:</p>
        <ul>
            <li>Precision</li>
            <li>Recall</li>
            <li>F1-score</li>
            <li>Accuracy</li>
            <li>Macro average (macro avg)</li>
            <li>Weighted average (weighted avg)</li>
        </ul>
        <h5>What is SMOTE?</h5>
        <p>SMOTE is a technique used to address the imbalance in datasets by oversampling the minority classes. It works by generating synthetic samples for the minority class, helping to balance the dataset and improve the performance of classification algorithms on minority classes.</p>

        <h5>What is Stratified K-Fold Cross-Validation with 5 Folds?</h5>
        <p>Stratified K-Fold Cross-Validation is a method of evaluating a model by dividing the data into K parts (in this case, 5) while maintaining the proportion of classes. Each fold is used as a validation set once, and the model is trained on the remaining folds. The results are averaged to provide a more accurate assessment of the model's performance.</p>
        <br>Convert 'Fault' column to binary for anomaly detection. NF = 0 Else 1
        <br><span style="color: lightcoral;">train_df['Anomaly'] = train_df['Fault'].apply(lambda x: 0 if x == 'NF' else 1)</span>
        <br><br>Results for each fold:
        <br><img src="/static/images/energy/windTurbineFaults/results_model_1.png" alt="results_model_1.png">
        <br><br>Results for prediction on test set:
        <br><img src="/static/images/energy/windTurbineFaults/results_model_1_2.png" alt="results_model_1_2.png">
        <br>

        <br><br><h4>2. Model Fault Diagnostic</h4>
        <p>For fault diagnostic, we focused on identifying specific types of anomalies based on the detected faults.</p>
        <br>
        <h5>Model Training</h5>
        <p>We used a Random Forest Classifier for fault diagnostic:</p>
        <ul>
            <li>Random forests are robust against overfitting and provide good accuracy for multi-class classification tasks.</li>
        </ul>
        <br>
        <h5>Model Performance</h5>
        <p>Metrics used to evaluate the model:</p>
        <ul>
            <li>Precision</li>
            <li>Recall</li>
            <li>F1-score</li>
            <li>Accuracy</li>
            <li>Macro average (macro avg)</li>
            <li>Weighted average (weighted avg)</li>
        </ul>
        <br>Results:
        <br><img src="/static/images/energy/windTurbineFaults/results_model_2.png" alt="results_model_2.png">

        <br><br><br><br><h3>Load prediction models</h3>
        <div class="form-group">
            <button onclick="runScript()">Load Fault Detection / Diagnostic models</button>
            <div id="status" style="margin-left: 10px;"></div>
        </div>

        <br><br><h3>Prediction using a CSV (predict_df)</h3>
        <div class="form-group">
            <button type="button" onclick="makePrediction()">Predict</button>
            <div id="makePredictionStatus"></div>
        </div>
        <div style="clear:both;"></div> <!-- Clear floats to ensure layout consistency -->
        <div id="predictionResult" style="margin-top: 10px;"></div>
        <br>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</body>
<style>
    .navbar {
        box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    }
    body {
        background-color: #1C2833;
    }
    .bg-custom {
        background-color: #283747;
    }
    .container {
        color: white;
        margin-top: 3%;
    }
    .form-group {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
    }
    .form-group label {
        width: 150px;
        margin-right: 10px;
    }
    table {
        border-collapse: collapse;
        width: 100%;
        margin-bottom: 20px;
    }
    th, td {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }
    th {
        background-color: #a2a2a2;
    }
    .toggle-btn {
        margin-bottom: 10px;
    }
</style>
<script>
    document.getElementById('toggleScadaDescBtn').addEventListener('click', function() {
        var table = document.getElementById('scadaDesc');
        if (table.style.display === 'none') {
            table.style.display = 'table';
        } else {
            table.style.display = 'none';
        }
    });
    document.getElementById('toggleStatusDescBtn').addEventListener('click', function() {
        var table = document.getElementById('statusDesc');
        if (table.style.display === 'none') {
            table.style.display = 'table';
        } else {
            table.style.display = 'none';
        }
    });
    document.getElementById('togglecombinedScadaFaultBtn').addEventListener('click', function() {
        var table = document.getElementById('combinedScadaFaultTable');
        if (table.style.display === 'none') {
            table.style.display = 'table';
        } else {
            table.style.display = 'none';
        }
    });

    function runScript() {
        $("#status").text("Script en cours d'exécution...");
        $.get("/load_wind_turbine_fault_models")
            .done(function() {
                $("#status").text("Exécution du script terminée");
            })
    }

    async function makePrediction() {
        $("#makePredictionStatus").text("Script en cours d'exécution...");
        $.get("/predict_wind_turbine_fault")
            .done(function(data) {
                $("#makePredictionStatus").text("Exécution du script terminée");

                if (data.error) {
                    $("#predictionResult").html("<p>" + data.error + "</p>");
                } else {
                    let resultHTML = "<table border='1'><tr><th>Line Number</th><th>Anomaly</th><th>Anomaly_Type</th></tr>";
                    data.forEach(function(row) {
                        resultHTML += "<tr><td>" + row.index + "</td><td>" + row.Anomaly + "</td><td>" + row.Anomaly_Type + "</td></tr>";
                    });
                    resultHTML += "</table>";
                    $("#predictionResult").html(resultHTML);
                }
            })
            .fail(function() {
                $("#makePredictionStatus").text("Erreur lors de l'exécution du script");
            });
    }
</script>
</html>